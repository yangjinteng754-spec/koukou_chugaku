<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ã‚µã‚¤ãƒãƒ¼æ”»é˜²ãƒ‡ãƒ¥ã‚¨ãƒ«ï¼ˆãƒ–ãƒ©ã‚¦ã‚¶ç‰ˆï¼‰</title>
  <style>
    :root{--card-bg:#ffffff;--bg:#f3f6fb;--accent:#2563eb;--danger:#ef4444;--good:#10b981}
    html,body{height:100%;margin:0;font-family:system-ui,-apple-system,"Hiragino Kaku Gothic ProN","Noto Sans JP",Meiryo,Arial;}
    body{background:linear-gradient(180deg,#eef7ff 0%,var(--bg) 100%);display:flex;align-items:center;justify-content:center;padding:24px}
    .card{width:100%;max-width:760px;background:var(--card-bg);border-radius:12px;box-shadow:0 8px 30px rgba(20,40,80,0.08);padding:20px}
    .header{display:flex;gap:12px;align-items:center;justify-content:space-between}
    .title{font-size:18px;font-weight:700;color:#0f172a}
    .small{font-size:13px;color:#475569}
    .status{display:flex;gap:12px;align-items:center}
    .hp{background:#f1f5f9;padding:8px 12px;border-radius:10px;font-weight:600}
    .controls{display:flex;gap:8px;align-items:center}
    .btn{background:var(--accent);color:#fff;padding:8px 12px;border-radius:8px;border:0;cursor:pointer;font-weight:600}
    .btn:disabled{opacity:0.5;cursor:default}
    .btn-ghost{background:transparent;border:1px solid #e2e8f0;color:#0f172a}
    .game{display:grid;grid-template-columns:1fr 340px;gap:18px;margin-top:18px}
    @media (max-width:900px){.game{grid-template-columns:1fr;}}
    .panel{background:#fbfdff;border-radius:10px;padding:14px}
    .question{font-size:16px;font-weight:700;margin-bottom:12px}
    .choices{display:flex;flex-direction:column;gap:8px}
    .choice{padding:10px;border-radius:8px;border:1px solid #e6eefb;background:transparent;text-align:left;cursor:pointer}
    .choice:disabled{opacity:0.6;cursor:default}
    .log{max-height:380px;overflow:auto;padding:8px;display:flex;flex-direction:column-reverse;gap:8px}
    .log-entry{font-size:13px;padding:8px;border-radius:8px;background:#f8fafc;border:1px solid #e6eefb}
    .result{margin-top:12px;font-size:16px;font-weight:700}
    .explain{margin-top:6px;font-size:13px;color:#334155}
    .name-input{padding:8px;border-radius:8px;border:1px solid #e2e8f0}
  </style>
</head>
<body>
  <div class="card">
    <div class="header">
      <div>
        <div class="title">âš”ï¸ ã‚µã‚¤ãƒãƒ¼æ”»é˜²ãƒ‡ãƒ¥ã‚¨ãƒ«ï¼ˆãƒ–ãƒ©ã‚¦ã‚¶ç‰ˆï¼‰</div>
        <div class="small">å­¦ç¿’ã—ãªãŒã‚‰æ•µã‚’å€’ã™ã‚¯ã‚¤ã‚ºã‚²ãƒ¼ãƒ ã€‚ãƒ†ãƒ¼ãƒå­¦ç¿’â†’å¾©ç¿’ãƒ¢ãƒ¼ãƒ‰ã‚ã‚Šã€‚</div>
      </div>
      <div class="status">
        <div>
          <label class="small">ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼å</label><br>
          <input id="playerName" class="name-input" type="text" placeholder="ã‚ãªãŸã®åå‰" value="ã‚ãªãŸ" />
        </div>
        <div class="hp" id="hpStatus">ã‚ãªãŸã®HP: 20 &nbsp;&nbsp; æ•µã®HP: 20</div>
        <div class="controls">
          <button id="restartBtn" class="btn-ghost">ãƒªã‚¹ã‚¿ãƒ¼ãƒˆ</button>
        </div>
      </div>
    </div>

    <div class="game">
      <div>
        <div class="panel">
          <div class="question" id="questionText">èª­ã¿è¾¼ã¿ä¸­â€¦</div>

          <div class="choices" id="choices"></div>

          <div class="explain" id="explainText"></div>
          <div class="result" id="resultText"></div>
        </div>
      </div>

      <aside>
        <div class="panel">
          <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px">
            <div class="small">ãƒ­ã‚°ï¼ˆæœ€æ–°ãŒä¸Šï¼‰</div>
            <div class="small" id="modeLabel">Mode: theme</div>
          </div>
          <div class="log" id="logArea"></div>
        </div>
      </aside>
    </div>
  </div>

  <script>
    // å…ƒã®Pythonãƒ‡ãƒ¼ã‚¿ã‚’ãƒ™ãƒ¼ã‚¹ã«ã—ãŸå•é¡Œãƒªã‚¹ãƒˆ
    const QUIZ_DATA = [
      {q: "å¼·åŠ›ãªãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã®æ¡ä»¶ã¯ï¼Ÿ", ans: "è‹±æ•°å­—ã¨è¨˜å·ã‚’æ··ãœã‚‹", choices: ["èª•ç”Ÿæ—¥ã‚’ä½¿ã†", "è‹±æ•°å­—ã¨è¨˜å·ã‚’æ··ãœã‚‹", "å…¨éƒ¨åŒã˜æ–‡å­—","ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’çµ±ä¸€ã™ã‚‹"], explain: "å¼·åŠ›ãªãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯è‹±æ•°å­—ã‚„è¨˜å·ã‚’çµ„ã¿åˆã‚ã›ã‚‹ã¨æ¨æ¸¬ã•ã‚Œã«ãããªã‚‹ã€‚", theme: "ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰"},
      {q: "ä¸æ­£ãƒ¡ãƒ¼ãƒ«ã§æƒ…å ±ã‚’ç›—ã‚€æ”»æ’ƒã¯ï¼Ÿ", ans: "ãƒ•ã‚£ãƒƒã‚·ãƒ³ã‚°", choices: ["ãƒãƒ«ã‚¦ã‚§ã‚¢", "ãƒ•ã‚£ãƒƒã‚·ãƒ³ã‚°", "SQLã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³","ãƒ¯ãƒ³ã‚¯ãƒªãƒƒã‚¯"], explain: "ãƒ•ã‚£ãƒƒã‚·ãƒ³ã‚°ã¯å½ãƒ¡ãƒ¼ãƒ«ã‚„ã‚µã‚¤ãƒˆã§æƒ…å ±ã‚’å…¥åŠ›ã•ã›ã¦ç›—ã‚€æ”»æ’ƒã§ã™ã€‚", theme: "æ”»æ’ƒæ‰‹æ³•"},
      {q: "é€šä¿¡ã‚’å®‰å…¨ã«ã™ã‚‹ä»•çµ„ã¿ã¯ï¼Ÿ", ans: "æš—å·åŒ–", choices: ["åœ§ç¸®", "æš—å·åŒ–", "ã‚³ãƒ”ãƒ¼","å…±æœ‰"], explain: "æš—å·åŒ–ã«ã‚ˆã‚Šç¬¬ä¸‰è€…ã«å†…å®¹ã‚’èª­ã¾ã‚Œãªã„ã‚ˆã†ã«ä¿è­·ã§ãã¾ã™ã€‚", theme: "æš—å·åŒ–"},
      {q: "Wi-Fiã‚’å®‰å…¨ã«ä½¿ã†ãŸã‚ã®å¯¾ç­–ã¯ï¼Ÿ", ans: "ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ä»˜ãæš—å·åŒ–", choices: ["å…¬é–‹Wi-Fiã‚’ä½¿ã†", "ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãªã—", "ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ä»˜ãæš—å·åŒ–", "SSIDéè¡¨ç¤ºã®ã¿"], explain: "Wi-Fiã¯å¿…ãšWPA2/WPA3ãªã©æš—å·åŒ–ã•ã‚ŒãŸã‚‚ã®ã‚’ä½¿ã„ã¾ã—ã‚‡ã†ã€‚", theme: "ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯"},
      {q: "ä¸æ­£ã‚¢ã‚¯ã‚»ã‚¹ã‚’é˜²ãã‚½ãƒ•ãƒˆã¯ï¼Ÿ", ans: "ãƒ•ã‚¡ã‚¤ã‚¢ã‚¦ã‚©ãƒ¼ãƒ«", choices: ["ã‚¢ãƒ³ãƒã‚¦ã‚¤ãƒ«ã‚¹ã ã‘", "ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ç®¡ç†", "ãƒ•ã‚¡ã‚¤ã‚¢ã‚¦ã‚©ãƒ¼ãƒ«", "VPNã ã‘"], explain: "ãƒ•ã‚¡ã‚¤ã‚¢ã‚¦ã‚©ãƒ¼ãƒ«ã¯å¤–éƒ¨ã‹ã‚‰ã®ä¸æ­£ã‚¢ã‚¯ã‚»ã‚¹ã‚’é˜²ãã¾ã™ã€‚", theme: "é˜²å¾¡"},
      {q: "æ€ªã—ã„ãƒ¡ãƒ¼ãƒ«ã«æ·»ä»˜ã•ã‚Œã¦ã„ã‚‹ã®ã¯ï¼Ÿ", ans: "ãƒãƒ«ã‚¦ã‚§ã‚¢", choices: ["ãƒãƒ«ã‚¦ã‚§ã‚¢", "PDF", "ç”»åƒ", "å‹•ç”»"], explain: "ä¸æ­£ãƒ¡ãƒ¼ãƒ«ã«ã¯ãƒãƒ«ã‚¦ã‚§ã‚¢ã‚„ã‚¦ã‚¤ãƒ«ã‚¹ãŒå«ã¾ã‚Œã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚", theme: "æ”»æ’ƒæ‰‹æ³•"},
      {q: "ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã®ä½¿ã„å›ã—ã¯å®‰å…¨ã‹ï¼Ÿ", ans: "å®‰å…¨ã§ã¯ãªã„", choices: ["å®‰å…¨ã§ã¯ãªã„", "å®‰å…¨", "å ´åˆã«ã‚ˆã‚‹","ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãªã—ã§ã„ã„"], explain: "åŒã˜ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ä½¿ã„å›ã™ã¨ã€1ã¤æ¼ã‚Œã‚‹ã ã‘ã§ä»–ã®ã‚µãƒ¼ãƒ“ã‚¹ã‚‚å±é™ºã«ãªã‚Šã¾ã™ã€‚", theme: "ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰"},
      {q: "å®‰å…¨ãªãƒ–ãƒ©ã‚¦ã‚¶ã®ç›®å°ã¯ï¼Ÿ", ans: "HTTPS", choices: ["HTTP", "HTTPS", "FTP","CSS"], explain: "HTTPSã¯é€šä¿¡ãŒæš—å·åŒ–ã•ã‚Œã¦ãŠã‚Šå®‰å…¨æ€§ãŒé«˜ã„ã€‚", theme: "æš—å·åŒ–"}
    ];

    // ã‚²ãƒ¼ãƒ çŠ¶æ…‹
    let playerHp = 20, enemyHp = 20;
    let remainingQuestions = [...QUIZ_DATA];
    let mode = 'theme'; // 'theme' -> 'review'
    let currentQ = null;
    const playerNameInput = document.getElementById('playerName');

    // UIè¦ç´ 
    const hpStatus = document.getElementById('hpStatus');
    const questionText = document.getElementById('questionText');
    const choicesBox = document.getElementById('choices');
    const explainText = document.getElementById('explainText');
    const resultText = document.getElementById('resultText');
    const logArea = document.getElementById('logArea');
    const modeLabel = document.getElementById('modeLabel');
    const restartBtn = document.getElementById('restartBtn');

    restartBtn.addEventListener('click', () => {
      startNewGame();
    });

    function startNewGame(){
      playerHp = 20; enemyHp = 20;
      remainingQuestions = [...QUIZ_DATA];
      mode = 'theme';
      currentQ = null;
      explainText.textContent = '';
      resultText.textContent = '';
      modeLabel.textContent = 'Mode: ' + mode;
      renderStatus();
      logArea.innerHTML = '';
      pushLog('ã‚²ãƒ¼ãƒ ã‚’é–‹å§‹ã—ã¾ã—ãŸã€‚');
      showQuestion();
    }

    function renderStatus(){
      const name = playerNameInput.value.trim() || 'ã‚ãªãŸ';
      hpStatus.textContent = `${name}ã®HP: ${playerHp}   æ•µã®HP: ${enemyHp}`;
    }

    function pushLog(text){
      const div = document.createElement('div');
      div.className = 'log-entry';
      div.textContent = text;
      logArea.appendChild(div);
    }

    function showQuestion(){
      explainText.textContent = '';
      resultText.textContent = '';

      if (remainingQuestions.length === 0){
        if (mode === 'theme'){
          remainingQuestions = [...QUIZ_DATA];
          mode = 'review';
          modeLabel.textContent = 'Mode: ' + mode;
          pushLog('âœ¨ å¾©ç¿’ãƒ¢ãƒ¼ãƒ‰é–‹å§‹ï¼ãƒ©ãƒ³ãƒ€ãƒ ã«å•é¡ŒãŒå‡ºã¾ã™ã€‚');
        } else {
          resultText.textContent = 'ğŸ‰ å…¨å•é¡Œã‚¯ãƒªã‚¢ï¼çŸ¥è­˜ã‚’èº«ã«ã¤ã‘ã¾ã—ãŸï¼';
          choicesBox.innerHTML = '';
          return;
        }
      }

      // ãƒ©ãƒ³ãƒ€ãƒ ã«1å•å–å¾—
      const idx = Math.floor(Math.random() * remainingQuestions.length);
      currentQ = remainingQuestions.splice(idx,1)[0];

      questionText.textContent = 'ğŸ’¡ å•é¡Œ: ' + currentQ.q;

      // é¸æŠè‚¢è¡¨ç¤ºï¼ˆå…ƒã®é †åºã‚’ä½¿ç”¨ï¼‰
      choicesBox.innerHTML = '';
      for (let i=0;i<4;i++){
        const btn = document.createElement('button');
        btn.className = 'choice';
        btn.textContent = currentQ.choices[i] || '';
        if (!currentQ.choices[i]) btn.disabled = true;
        btn.addEventListener('click', () => onChoose(btn));
        choicesBox.appendChild(btn);
      }
    }

    function onChoose(btn){
      const selected = btn.textContent;
      // disable all choices until next question
      const all = choicesBox.querySelectorAll('button');
      all.forEach(b => b.disabled = true);

      if (selected === currentQ.ans){
        const dmg = randInt(3,5);
        enemyHp -= dmg;
        pushLog(`âœ… æ­£è§£ï¼æ•µã«${dmg}ãƒ€ãƒ¡ãƒ¼ã‚¸ï¼ï¼ˆ${currentQ.theme}ï¼‰`);
        explainText.textContent = 'è§£èª¬: ' + currentQ.explain;
      } else {
        const dmg = randInt(2,4);
        playerHp -= dmg;
        pushLog(`âŒ ä¸æ­£è§£ï¼ã‚ãªãŸã¯${dmg}ãƒ€ãƒ¡ãƒ¼ã‚¸ã‚’å—ã‘ãŸã€‚æ­£è§£ã¯ã€Œ${currentQ.ans}ã€ã€‚ï¼ˆ${currentQ.theme}ï¼‰`);
        explainText.textContent = 'è§£èª¬: ' + currentQ.explain;
      }

      renderStatus();
      checkGameOver();

      if (playerHp > 0 && enemyHp > 0){
        // æ¬¡ã®å•é¡Œã‚’å°‘ã—å¾…ã£ã¦å‡ºã™
        setTimeout(() => {
          showQuestion();
        }, 1500);
      }
    }

    function checkGameOver(){
      if (playerHp <= 0){
        resultText.textContent = 'âŒ æ•—åŒ—â€¦ã‚·ã‚¹ãƒ†ãƒ ã‚’çªç ´ã•ã‚Œã¾ã—ãŸã€‚';
        disableChoices();
        pushLog('ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ï¼šæ•—åŒ—');
      } else if (enemyHp <= 0){
        resultText.textContent = 'âœ… å‹åˆ©ï¼ã‚·ã‚¹ãƒ†ãƒ ã‚’å®ˆã‚Šåˆ‡ã‚Šã¾ã—ãŸï¼';
        disableChoices();
        pushLog('ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ï¼šå‹åˆ©');
      }
    }

    function disableChoices(){
      const all = choicesBox.querySelectorAll('button');
      all.forEach(b => b.disabled = true);
    }

    function randInt(a,b){ // inclusive
      return Math.floor(Math.random()*(b-a+1))+a;
    }

    // åå‰å¤‰æ›´ã§è¡¨ç¤ºã‚’æ›´æ–°
    playerNameInput.addEventListener('input', renderStatus);

    // æœ€åˆã«é–‹å§‹
    startNewGame();

  </script>
</body>
</html>
